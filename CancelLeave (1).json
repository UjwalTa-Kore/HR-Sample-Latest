{"_id":"dg-fe1ac48c-31aa-548d-bd5a-412e822abd8d","refId":"590592d2-3918-5663-a091-609c4d1486d5","nodes":[{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"intent0","type":"intent","transitions":[{"default":"script27","metadata":{"color":"#299d8e","connId":"dummy0"}}],"metadata":{"left":0,"top":0},"componentIndex":0},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity3","type":"entity","transitions":[{"default":"entity10","metadata":{"color":"#299d8e","connId":"dummy5"}}],"metadata":{"left":2,"top":586},"componentIndex":2},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"optional","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity4","type":"entity","transitions":[{"default":"entity7","metadata":{"color":"#299d8e","connId":"dummy7"}}],"metadata":{"left":100,"top":1132},"componentIndex":12},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"optional","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity7","type":"entity","transitions":[{"default":"entity11","metadata":{"color":"#299d8e","connId":"dummy14"}}],"metadata":{"left":360,"top":1288},"componentIndex":1},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script8","type":"script","transitions":[{"if":{"context":"leaves.length","op":"eq","value":"0"},"then":"message17","metadata":{"color":"#299d8e","connId":"dummy44"}},{"if":{"context":"noLeaves","op":"eq","value":"true"},"then":"entity18","metadata":{"color":"#5ea8d3","connId":"dummy46"}},{"if":{"context":"noLeaves","op":"eq","value":"leaveDate"},"then":"entity20","metadata":{"color":"#e9c369","connId":"dummy50"}},{"default":"entity9","metadata":{"color":"#299d8e","connId":"dummy19"}}],"metadata":{"left":821,"top":317},"componentIndex":7},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"3","noAutoCorrection":false,"notForReuse":true,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity9","type":"entity","transitions":[{"default":"script12","metadata":{"color":"#299d8e","connId":"dummy20"}}],"metadata":{"left":377,"top":1},"componentIndex":14},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"optional","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task","type":{"option":"doNotAllowHoldResume"}},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity10","type":"entity","transitions":[{"default":"entity16","metadata":{"color":"#299d8e","connId":"dummy22"}}],"metadata":{"left":240,"top":725},"componentIndex":4},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity11","type":"entity","transitions":[{"default":"","metadata":{"color":"#299d8e","connId":"dummy24"}}],"metadata":{"left":488,"top":1100},"componentIndex":10},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script12","type":"script","transitions":[{"default":"service13","metadata":{"color":"#299d8e","connId":"dummy29"}}],"metadata":{"left":983,"top":0},"componentIndex":13},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"service13","type":"service","transitions":[{"default":"message14","metadata":{"color":"#299d8e","connId":"dummy31"}}],"metadata":{"left":1528,"top":0},"componentIndex":6},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"message14","type":"message","transitions":[{"default":"end","metadata":{"color":"#299d8e","connId":"dummy33"}}],"metadata":{"left":1878,"top":0},"componentIndex":16},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task","type":{"option":"doNotAllowHoldResume"}},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity16","type":"entity","transitions":[{"default":"script28","metadata":{"color":"#299d8e","connId":"dummy41"}}],"metadata":{"left":316,"top":526},"componentIndex":17},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"message17","type":"message","transitions":[{"default":"end","metadata":{"color":"#299d8e","connId":"dummy43"}}],"metadata":{"left":668,"top":198},"componentIndex":3},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task","type":{"option":"doNotAllowHoldResume"}},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity18","type":"entity","transitions":[{"default":"script19","metadata":{"color":"#299d8e","connId":"dummy45"}}],"metadata":{"left":1072,"top":181},"componentIndex":2},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script19","type":"script","transitions":[{"default":"script8","metadata":{"color":"#299d8e","connId":"dummy47"}}],"metadata":{"left":1165,"top":417},"componentIndex":9},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"interruptsEnabled":true,"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"precedence":"entityOverIntent","message":[],"errorMessage":[]},"nodeId":"entity20","type":"entity","transitions":[{"default":"script21","metadata":{"color":"#299d8e","connId":"dummy49"}}],"metadata":{"left":609,"top":568},"componentIndex":17},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script21","type":"script","transitions":[{"default":"script8","metadata":{"color":"#299d8e","connId":"dummy51"}}],"metadata":{"left":1039,"top":575},"componentIndex":18},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script22","type":"script","transitions":[{"default":"","metadata":{"color":"#299d8e","connId":"dummy64"}}],"metadata":{"left":1492,"top":563},"componentIndex":20},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"service23","type":"service","transitions":[{"default":"script8","metadata":{"color":"#299d8e","connId":"dummy65"}}],"metadata":{"left":383,"top":213},"componentIndex":19},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"service24","type":"service","transitions":[{"default":"entity3","metadata":{"color":"#299d8e","connId":"dummy66"}}],"metadata":{"left":0,"top":430},"componentIndex":8},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"message26","type":"message","transitions":[{"default":"end","metadata":{"color":"#299d8e","connId":"dummy75"}}],"metadata":{"left":1685,"top":138},"componentIndex":21},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script27","type":"script","transitions":[{"default":"service29","metadata":{"color":"#299d8e","connId":"dummy76"}}],"metadata":{"left":1,"top":119},"componentIndex":5},{"nodeOptions":{"customTags":{"session":[],"message":[],"user":[]},"transitionType":"auto","promptOptions":"required","reuseMarkedupPhrases":false,"interruptOptions":{"priority":"task"},"transitionMode":"initiateCurrentTask","inputHandlingOptions":"useAsEntityValue","reuseOptions":"1","noAutoCorrection":false,"notForReuse":false,"contextTags":[],"message":[],"errorMessage":[]},"nodeId":"script28","type":"script","transitions":[{"default":"service23","metadata":{"color":"#299d8e","connId":"dummy77"}}],"metadata":{"left":341,"top":406},"componentIndex":11},{"nodeOptions":{"transitionType":"auto","message":[],"errorMessage":[]},"nodeId":"service29","type":"service","transitions":[{"if":{"context":"getEmployeeData1.response.body.length","op":"eq","value":"0"},"then":"message26","metadata":{"color":"#299d8e","connId":"dummy81"}},{"default":"service24","metadata":{"color":"#299d8e","connId":"dummy78"}}],"metadata":{"left":130,"top":275},"componentIndex":15}],"localeData":{"en":{"name":"CancelLeave","shortDesc":""}},"defaultLanguage":"en","interruptOptions":{"priority":"bot"},"contextLifeTime":{"options":"close"},"amendConfig":{"priority":"bot"},"name":"CancelLeave","sentences":[],"components":[{"dialogId":"dg-fe1ac48c-31aa-548d-bd5a-412e822abd8d","entityFields":{"cityAdvanced":[]},"localeData":{"en":{"desc":"","intent":"CancelLeave"}},"name":"CancelLeave","preConditions":[],"refId":"af2f7519-748d-58ce-8f41-cf14eb8b99d3","type":"intent","dialogRefId":"590592d2-3918-5663-a091-609c4d1486d5"},{"entityFields":{"cityAdvanced":[]},"entityType":"date","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I am unable to recognize the date you entered. Please enter the date again, in the YYYY-MM-DD or MM-DD-YYYY form.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0003"}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0003","type":"basic"}},"channel":"default"}],"name":"date","preConditions":[],"refId":"c6aef26d-405e-5019-b55b-9c152952bcfc","type":"entity"},{"applyDefaultTemplate":true,"entityFields":{"cityAdvanced":[]},"entityType":"list_of_values","errorMessage":[{"localeData":{"en":{"text":"I'm%20sorry%2C%20unable%20to%20recognize%20the%20value.%20Please%20select%20a%20value%20from%20the%20list.","type":"basic"},"de":{"text":"I'm sorry, I did not recognize the value you have entered. Please select a value from the list.","type":"basic"},"es":{"text":"I'm sorry, I did not recognize the value you have entered. Please select a value from the list.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"leaveType","allowedValues":{"variable":"context.leaveTypes.response.body","titleKey":"displayName","valueKey":"typeId","synonymsKey":"synonyms"}},"de":{"label":"leaveType","allowedValues":{"values":[{"title":"Sick","value":"sick","synonyms":["sick"]},{"title":"PTO","value":"pto","synonyms":["pto","vacation"]},{"title":"Bereavement","value":"bereavement","synonyms":["bereavement"]},{"title":"Civic duty","value":"civic","synonyms":["\"civic duty\"","\"jury duty\""]},{"title":"FMLA","value":"fmla","synonyms":["FMLA","\"family and medical leave\""]},{"title":"religious","value":"religious","synonyms":["religious"]}]}},"es":{"label":"leaveType","allowedValues":{"values":[{"title":"Sick","value":"sick","synonyms":["sick"]},{"title":"PTO","value":"pto","synonyms":["pto","vacation"]},{"title":"Bereavement","value":"bereavement","synonyms":["bereavement"]},{"title":"Civic duty","value":"civic","synonyms":["\"civic duty\"","\"jury duty\""]},{"title":"FMLA","value":"fmla","synonyms":["FMLA","\"family and medical leave\""]},{"title":"religious","value":"religious","synonyms":["religious"]}]}}},"message":[{"localeData":{"en":{"text":"%2F%2F%20var%20info%20%3D%20%5B%22Personal%20Time%20Off%22%2C%20%22Sick%20Leave%22%2C%22Bereavement%20Time%20Off%22%2C%20%22Civic%20Duty%20Time%20Off%22%2C%20%22Paternity%20Leave%22%2C%22Maternity%22%2C%20%22Religious%20Observance%20Time%20Off%22%2C%22Floating%22%2C%22Unpaid%22%5D%3B%0Avar%20s%3Dcontext.leaveTypes.response.body%0Avar%20info%3D%5B%5D%0Afor(var%20i%3D0%3Bi%3Cs.length%3Bi%2B%2B)%0A%7B%0A%20%20%20%20info.push(s%5Bi%5D.displayName)%0A%7D%0Avar%20message%20%3D%20%7B%0A%20%20%20%20%22type%22%3A%20%22template%22%2C%0A%20%20%20%20%22payload%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22template_type%22%3A%20%22button%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22What%20are%20you%20looking%20for%3F%22%2C%0A%20%20%20%20%20%20%20%20%22subText%22%3A%20%22Button%20Template%20Description%22%2C%0A%20%20%20%20%20%20%20%20%22buttons%22%3A%20%5B%5D%0A%20%20%20%20%7D%0A%7D%3B%0Afor%20(i%20%3D%200%3B%20i%20%3C%20info.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%2F%2F%20if%20the%20button%20is%20to%20send%20back%20text%20to%20platform%0A%20%20%20%20var%20button%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22postback%22%2C%0A%20%20%20%20%20%20%20%20%22title%22%3A%20info%5Bi%5D%2C%0A%20%20%20%20%20%20%20%20%22payload%22%3A%20info%5Bi%5D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F*%20Uncomment%20this%20if%20the%20button%20is%20to%20redirect%20to%20url%0A%20%20%20%20%20var%20button%20%3D%20%7B%0A%20%20%20%20%20%22type%22%3A%22web_url%22%2C%20%2F%2F%20type%20can%20be%20%22postback%22%20if%0A%20%20%20%20%20%22url%22%3A%22URL_TO_REDIRECT%22%2C%0A%20%20%20%20%20%22title%22%3Abuttons%5Bi%5D%0A%20%20%20%20%20%7D%3B%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20message.payload.buttons.push(button)%3B%0A%7D%0Aprint(JSON.stringify(message))%3B%0A","type":"uxmap"}},"channel":"ivrInst-8a593ff3-4a34-5f7f-8ea9-ca5b05f3b0ec"},{"localeData":{"en":{"text":"Select%20type%20of%20leave%20to%20apply","type":"basic"},"de":{"text":"Sample prompt message for Entity0001","type":"basic"},"es":{"text":"Sample prompt message for Entity0001","type":"basic"}},"channel":"default"},{"localeData":{"en":{"text":"%2F%2F%20var%20info%20%3D%20%5B%22Personal%20Time%20Off%22%2C%20%22Sick%20Leave%22%2C%22Bereavement%20Time%20Off%22%2C%20%22Civic%20Duty%20Time%20Off%22%2C%20%22Paternity%20Leave%22%2C%22Maternity%22%2C%20%22Religious%20Observance%20Time%20Off%22%2C%22Floating%22%2C%22Unpaid%22%5D%3B%0Avar%20s%3Dcontext.leaveTypes.response.body%0Avar%20info%3D%5B%5D%0Afor(var%20i%3D0%3Bi%3Cs.length%3Bi%2B%2B)%0A%7B%0A%20%20%20%20info.push(s%5Bi%5D.displayName)%0A%7D%0Avar%20message%20%3D%20%7B%0A%20%20%20%20%22type%22%3A%20%22template%22%2C%0A%20%20%20%20%22payload%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22template_type%22%3A%20%22button%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22What%20are%20you%20looking%20for%3F%20%F0%9F%A7%90%22%2C%0A%20%20%20%20%20%20%20%20%22subText%22%3A%20%22Button%20Template%20Description%22%2C%0A%20%20%20%20%20%20%20%20%22buttons%22%3A%20%5B%5D%0A%20%20%20%20%7D%0A%7D%3B%0Afor%20(i%20%3D%200%3B%20i%20%3C%20info.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%2F%2F%20if%20the%20button%20is%20to%20send%20back%20text%20to%20platform%0A%20%20%20%20var%20button%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22postback%22%2C%0A%20%20%20%20%20%20%20%20%22title%22%3A%20info%5Bi%5D%2C%0A%20%20%20%20%20%20%20%20%22payload%22%3A%20info%5Bi%5D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F*%20Uncomment%20this%20if%20the%20button%20is%20to%20redirect%20to%20url%0A%20%20%20%20%20var%20button%20%3D%20%7B%0A%20%20%20%20%20%22type%22%3A%22web_url%22%2C%20%2F%2F%20type%20can%20be%20%22postback%22%20if%0A%20%20%20%20%20%22url%22%3A%22URL_TO_REDIRECT%22%2C%0A%20%20%20%20%20%22title%22%3Abuttons%5Bi%5D%0A%20%20%20%20%20%7D%3B%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20message.payload.buttons.push(button)%3B%0A%7D%0Aprint(JSON.stringify(message))%3B%0A","type":"uxmap"}},"channel":"rtm"}],"name":"leaveType","preConditions":[],"refId":"a67e7368-ed63-5364-9467-597eb12dbef1","type":"entity"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Message0009"}},"message":[{"localeData":{"en":{"text":"You%20haven't%20applied%20leave%20on%20this%20date","type":"basic"}},"channel":"default"}],"name":"noLeaveMsg","preConditions":[],"refId":"b0aaf9eb-f8a0-5b11-85b7-6be8368c272b","type":"message"},{"entityFields":{"cityAdvanced":[]},"entityType":"composite","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I did not recognize the value you have entered. Please enter again.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"E_appliedOn","patterns":[],"compositePatterns":[{"value":"@E_appliedPreposition on @date","original":"@E_appliedPreposition on @date"},{"value":"@E_appliedPreposition @date","original":"@E_appliedPreposition @date"}]}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0009","type":"basic"}},"channel":"default"}],"name":"E_appliedOn","preConditions":[],"refId":"96eecf8a-1d66-5c2e-9042-cd75dc618411","type":"entity"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"GetUserProfile_"}},"name":"GetUserProfile_","preConditions":[],"refId":"fb3caeff-175d-562d-99bd-7a8fc52cea0b","script":"%2F%2F%20context.userProfile%3D%7B%22email%22%3A%22ujwal.tadur%40kore.com%22%7D%0A%2F%2F%20var%20email%3D''%0A%2F*if(context.session.BotUserSession.channels%5B0%5D.reqId)%0A%7B%0A%20%20%20%20var%20email%3Dcontext.session.BotUserSession.lastMessage.messagePayload.from%2F%2F%22ujwal.tadur%40kore.com%22%3B%2F%2Fcontext.session.BotUserSession.channels%5B0%5D.reqId.split(%22%2B%22)%5B1%5D%0A%20%20%20%20context.userProfile%20%3D%20%7B%22email%22%3Aemail%7D%3B%0A%7D%0Aelse%0A%7B%0A%20%20%20%20context.userProfile%3D%7B%22email%22%3A%22ujwal.tadur%40kore.com%22%7D%3B%0A%20%20%20%20%2F%2F%20context.userProfile%3D%7B%22email%22%3A%22ab%40koraqa1.com%22%7D%3B%0A%7D*%2F%0Avar%20email%3D'ab%40koraqa1.com'%0Aif(context.session.UserContext.emailId)%0A%20%20%20%20email%3Dcontext.session.UserContext.emailId%0Aelse%20if(context.session.BotUserSession.lastMessage.messagePayload.from)%0A%20%20%20%20email%3Dcontext.session.BotUserSession.lastMessage.messagePayload.from%0A%0Avar%20s%3Dcontext.session.BotUserSession.lastMessage.channel%3B%0As%3Ds.slice(0%2C3)%0Aif(s%3D%3D%3D%22ivr%22)%0A%7B%0A%20%20%20%20email%3Dcontext.session.BotUserSession.lastMessage.messagePayload.from.id%0A%7D%0Acontext.userProfile%3D%7B%0A%20%20%20%20%22email%22%3Aemail%0A%7D%0A%2F%2F%20BotUserSession.put(%22userProfile%22%2Cemail)%3B","type":"script"},{"endPoint":{"port":"","path":"{{env.URL_updateLeave}}","method":"put","connectorEnabled":false,"piiDataEnabled":false},"entityFields":{"cityAdvanced":[]},"headers":{"type":"raw","value":"{\"Content-Type\":\"application/json\"}"},"idp":"none","localeData":{"en":{"label":"Service0003"}},"name":"cancelLeaveStatus","payload":{"type":"raw","value":"%7B%0A%20%20%22id%22%3A%20%22%7B%7Bcontext.leaveIdtoCancel%7D%7D%22%2C%0A%20%20%22statusId%22%3A%22cancelled%22%2C%0A%20%20%22canceledOn%22%3A%20%22%7B%7Bcontext.currentDate%7D%7D%22%0A%7D"},"preConditions":[],"refId":"0168827b-139d-5133-909d-45108070e172","serviceAPITimeout":20,"serviceNodeType":"custom","serviceType":"rest","type":"service"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Script0004"}},"name":"getAppliedLeaves","preConditions":[],"refId":"dc2d7955-2e32-591f-a1e6-da62f3a2a4a0","script":"%20%20%20%20var%20days%3B%0A%20%20%20%20var%20leaves%3B%0A%20%20%20%20var%20leave%20%3D%20%5B%5D%3B%0A%20%20%20%20if(context.fetchLeaveStatus.response.body)%0A%20%20%20%20%20leaves%20%3D%20context.fetchLeaveStatus.response.body%3B%0A%20%20%20%20%20var%20employeeData%20%3D%20context.getEmployeeData1.response.body%5B0%5D%3B%0A%20%20%20%20%20%2F*%20function%20daysCalc(from%2C%20to)%7B%0A%20%20%20%20%20%20%20%20%20var%20fromMoment%20%3D%20koreUtil.moment(from%2C%20%22YYYY-MM-DD%22)%3B%0A%20%20%20%20%20%20%20%20var%20toMoment%20%3D%20koreUtil.moment(to%2C%20%22YYYY-MM-DD%22)%3B%0A%20%20%20%20%20%20%20%20var%20leaveDays%20%3D%20toMoment.diff(fromMoment%2C%20%22days%22)%20%2B1%3B%0A%20%20%20%20%20%20%20%20return%20leaveDays%3B%0A%20%20%20%20%20%20%7D*%2F%0A%20%20%20%20%20%20function%20daysdiff(from%20%2C%20to)%7B%0A%20%20%20%20%20%20%20%20var%20fromDate%20%3D%20new%20Date(from)%3B%20%0A%20%20%20%20%20%20%20%20var%20toDate%20%3D%20new%20Date(to)%3B%0A%20%20%20%20%20%20%20%20var%20diff%20%3D%20toDate.getTime()%20-%20fromDate.getTime()%3B%0A%20%20%20%20%20%20%20%20var%20days%20%3D%20diff%20%2F%20(1000%20*%203600%20*%2024)%2B1%3B%0A%20%20%20%20%20%20%20%20return%20days%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20if(context.entities.E_appliedOn)%7B%0A%20%20%20%20%20if(context.entities.E_appliedOn.E_appliedPreposition%20%26%26%20context.entities.E_appliedOn.date)%7B%0A%20%20%20%20%20%20%20%20leaves%20%3D%20leaves.filter(function(e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(%20e.appliedOn%20%3D%3D%20context.entities.E_appliedOn.date%20%26%26%20e.statusId%20%3D%3D%20'applied')%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20for(i%3D0%3Bi%3Cleaves.length%3Bi%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20days%20%3D%20daysdiff(leaves%5Bi%5D.dates%5B0%5D%2C%20leaves%5Bi%5D.dates%5B(leaves%5Bi%5D.dates.length-1)%5D)%0A%20%20%20%20%20%20%20%20if(days%20%3D%3D%3D%201)%7B%0A%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20on%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20day%20%3D%20'days'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20for%20'%20%2B%20days%20%2B%20'%20'%20%2B%20day%20%2B%20'%20starting%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20leave.push(%7B%22title%22%3Aid%2C%22value%22%3Aleaves%5Bi%5D.id%7D)%0A%20%20%20%20%20%20%20%20context.leaves%20%3Dleave%0A%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if(context.entities.E_leaveDates%20%26%26%20context.entities.E_leaveDates.date)%7B%0A%20%20%20%20%20%0A%20%20%20%20%20%20%20%20leaves%20%3D%20leaves.filter(function(e)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(e.statusId%20%3D%3D%20'applied')%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20for(i%3D0%3Bi%3Cleaves.length%3Bi%2B%2B)%7B%0A%20%20%20%20%20%20%20%20days%20%3D%20daysdiff(leaves%5Bi%5D.dates%5B0%5D%2C%20leaves%5Bi%5D.dates%5B(leaves%5Bi%5D.dates.length-1)%5D)%0A%20%20%20%20%20%20%20%20if(days%20%3D%3D%3D%201)%7B%0A%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20on%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20day%20%3D%20'days'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20for%20'%20%2B%20days%20%2B%20'%20'%20%2B%20day%20%2B%20'%20starting%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20leave.push(%7B%22title%22%3Aid%2C%22value%22%3Aleaves%5Bi%5D.id%7D)%0A%20%20%20%20%20%20%20%20context.leaves%20%3Dleave%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%7D%0A%20%20%20%20else%20if(context.entities.leaveType)%7B%0A%20%20%20%20%20%20%20%20%20leaves%20%3D%20leaves.filter(function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20return%20(e.statusId%20%3D%3D%20'applied'%20)%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20for(i%3D0%3Bi%3Cleaves.length%3Bi%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20days%20%3D%20daysdiff(leaves%5Bi%5D.dates%5B0%5D%2C%20leaves%5Bi%5D.dates%5B(leaves%5Bi%5D.dates.length-1)%5D)%0A%20%20%20%20%20%20%20%20if(days%20%3D%3D%3D%201)%7B%0A%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20on%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20day%20%3D%20'days'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20for%20'%20%2B%20days%20%2B%20'%20'%20%2B%20day%20%2B%20'%20starting%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20leave.push(%7B%22title%22%3Aid%2C%22value%22%3Aleaves%5Bi%5D.id%7D)%0A%20%20%20%20%20%20%20%20context.leaves%20%3Dleave%0A%20%20%20%20%7D%0A%20%20%20%20%0A%7D%0Aelse%20if(leaves.length%3C%3D5)%7B%0A%20%20%20%20%20for(i%3D0%3Bi%3Cleaves.length%3Bi%2B%2B)%7B%0A%20%20%20%20%20%20%20%20%20days%20%3D%20days%20%3D%20daysdiff(leaves%5Bi%5D.dates%5B0%5D%2C%20leaves%5Bi%5D.dates%5B(leaves%5Bi%5D.dates.length-1)%5D)%0A%20%20%20%20%20%20%20%20if(days%20%3D%3D%3D%201)%7B%0A%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20on%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20day%20%3D%20'days'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20employeeData.firstName%20%2B%20'%20'%20%2B%20employeeData.lastName%20%2B%20'%5C's%20'%20%2B%20leaves%5Bi%5D.typeId%20%2B%20'%20leave%20for%20'%20%2B%20days%20%2B%20'%20'%20%2B%20day%20%2B%20'%20starting%20'%20%2B%20leaves%5Bi%5D.dates%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20leave.push(%7B%22title%22%3Aid%2C%22value%22%3Aleaves%5Bi%5D.id%7D)%0A%20%20%20%20%20%20%20%20context.leaves%20%3Dleave%0A%20%20%20%20%7D%20%0A%7D%0Aelse%20if%20(context.isFromLeaveType%3D%3D%3D%20true%20%26%26%20context.leaves.length%3E5)%7B%0A%20%20%20%20context.noLeaves%20%3D%20'leaveDate'%0A%7D%0Aelse%20if(context.leaves%3D%3D%3Dundefined)%0A%7B%0A%20%20%20%20context.leaves%3D%5B%5D%0A%7D%0Aelse%20%7B%0A%20%20context.noLeaves%20%3D%20true%3B%20%20%20%0A%7D%0A","type":"script"},{"endPoint":{"port":"","path":"{{env.URL_getLeaveTypes}}","method":"post","connectorEnabled":false,"piiDataEnabled":false},"entityFields":{"cityAdvanced":[]},"headers":{"type":"raw","value":"{}"},"idp":"none","localeData":{"en":{"label":"Service0003"}},"name":"leaveTypes","payload":{"type":"raw","value":""},"preConditions":[],"refId":"ab883599-e1b5-5b57-866c-a709aed4a5ff","serviceAPITimeout":20,"serviceNodeType":"custom","serviceType":"rest","type":"service"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Script0004"}},"name":"flagForLeaveType","preConditions":[],"refId":"076e8a22-bf9c-570f-8af4-a045d06f715c","script":"context.isFromLeaveType%20%3D%20true%3B%0Acontext.noLeaves%20%3D%20false%3B","type":"script"},{"entityFields":{"cityAdvanced":[]},"entityType":"dateperiod","errorMessage":[],"localeData":{"en":{"label":"E_datePeriod"}},"message":[],"name":"E_datePeriod","preConditions":[],"refId":"e497434a-7cad-5a34-a8e0-80fb61ad48dd","type":"entity"},{"entityFields":{"cityAdvanced":[]},"preConditions":[],"name":"UpdateEmpId_","type":"script","localeData":{"en":{"label":"UpdateEmpId_"}},"refId":"05f71706-5bb6-5b3f-8425-765722d31721","script":"context.empId%3Dcontext.getEmployeeData1.response.body%5B0%5D.employeeId"},{"entityFields":{"cityAdvanced":[]},"entityType":"list_of_values","errorMessage":[{"localeData":{"en":{"text":"I'm%20sorry%2C%20unable%20to%20recognize%20the%20value.%20Please%20select%20a%20value%20from%20the%20list.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"E_appliedPreposition","allowedValues":{"values":[{"title":"applied","value":"applied","synonyms":["applied"]},{"title":"dfsfdsdsfsdfdsf","value":"dfsfdsdsfsdfdsf","synonyms":["dfsfdsdsfsdfdsf"]}]}}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0002","type":"basic"}},"channel":"default"}],"name":"E_appliedPreposition","preConditions":[],"refId":"bcf8d403-6b5a-5b9c-b6f0-5ef06446115f","type":"entity"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Script0004"}},"name":"storingIdstoCancel","preConditions":[],"refId":"22fcd8a0-765b-574e-a0c1-445048e741cc","script":"context.leaveIdtoCancel%20%3D%20context.entities.leavesCancel%0Acontext.currentDate%20%3D%20new%20Date().toJSON().slice(0%2C10)","type":"script"},{"entityFields":{"cityAdvanced":[]},"entityType":"list_of_values","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I did not recognize the value you have entered. Please select a value from the list.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0009","allowedValues":{"variable":"context.leaves","titleKey":"title","valueKey":"value","synonymsKey":"value","indexKey":""}}},"message":[{"localeData":{"en":{"text":"var%20message%20%3D%20%7B%0D%0A%20%20%22type%22%3A%20%22template%22%2C%0D%0A%20%20%22payload%22%3A%20%7B%0D%0A%20%20%20%20%22template_type%22%3A%20%22multi_select%22%2C%0D%0A%20%20%20%20%22buttons%22%3A%20%5B%0D%0A%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%22title%22%3A%20%22Cancel%22%2C%0D%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22postback%22%2C%0D%0A%20%20%20%20%20%20%20%20%22payload%22%3A%20%22payload%22%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%5D%2C%0D%0A%20%20%20%20%22elements%22%3A%20context.leaves%0D%0A%20%20%7D%0D%0A%7D%3B%0D%0A%0D%0Aprint(JSON.stringify(message))%3B%20","type":"uxmap"}},"channel":"default"},{"localeData":{"en":{"text":"var%20message%20%3D%20%7B%0D%0A%20%20%22type%22%3A%20%22template%22%2C%0D%0A%20%20%22payload%22%3A%20%7B%0D%0A%20%20%20%20%22template_type%22%3A%20%22multi_select%22%2C%0D%0A%20%20%20%20%22buttons%22%3A%20%5B%0D%0A%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%22title%22%3A%20%22Cancel%22%2C%0D%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22postback%22%2C%0D%0A%20%20%20%20%20%20%20%20%22payload%22%3A%20%22payload%22%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%5D%2C%0D%0A%20%20%20%20%22elements%22%3A%20context.leaves%0D%0A%20%20%7D%0D%0A%7D%3B%0D%0A%0D%0Aprint(JSON.stringify(message))%3B%20","type":"uxmap"}},"channel":"ivrInst-8a593ff3-4a34-5f7f-8ea9-ca5b05f3b0ec"},{"localeData":{"en":{"text":"var%20message%20%3D%20%7B%0D%0A%20%20%22type%22%3A%20%22template%22%2C%0D%0A%20%20%22payload%22%3A%20%7B%0D%0A%20%20%20%20%22template_type%22%3A%20%22multi_select%22%2C%0D%0A%20%20%20%20%22buttons%22%3A%20%5B%0D%0A%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%22title%22%3A%20%22Cancel%22%2C%0D%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22postback%22%2C%0D%0A%20%20%20%20%20%20%20%20%22payload%22%3A%20%22payload%22%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%5D%2C%0D%0A%20%20%20%20%22elements%22%3A%20context.leaves%0D%0A%20%20%7D%0D%0A%7D%3B%0D%0A%0D%0Aprint(JSON.stringify(message))%3B%20","type":"uxmap"}},"channel":"rtm"}],"name":"leavesCancel","preConditions":[],"refId":"dd7ea2fe-4cba-50a9-b1b7-6f538a64d4ac","type":"entity"},{"endPoint":{"port":"","path":"{{env.URL_getEmployeeData}}","method":"post","connectorEnabled":false,"piiDataEnabled":false},"entityFields":{"cityAdvanced":[]},"headers":{"type":"raw","value":"{\"Content-Type\":\"application/json\"}"},"idp":"none","localeData":{"en":{"label":"Service0003"}},"name":"getEmployeeData1","payload":{"type":"raw","value":"%7B%0A%20%20%22email%22%3A%20%22%7B%7Bcontext.session.UserContext.emailId%7D%7D%22%0A%7D"},"preConditions":[],"refId":"700bc5a1-b018-5848-b484-dd346a678bfd","sampleResponse":[{"name":"sampleResponse","isDefault":true,"response":"{\"statusCode\":200,\"body\":[{\"dOB\":\"03-07-1998\",\"email\":\"gowrisankar.achanta@kore.com\",\"employeeId\":\"KIC9048\",\"employeeType\":\"fullTime\",\"firstName\":\"Sankar\",\"gender\":\"male\",\"joiningDate\":\"01-08-2019\",\"lastName\":\"Achanta\",\"managerId\":\"KIO90\",\"middleName\":\"\",\"phone\":\"8074650891\",\"role\":\"\",\"id\":\"9136593b45ce09c1\"}],\"headers\":{\"x-powered-by\":\"Express\",\"access-control-allow-origin\":\"*\",\"access-control-allow-methods\":\"PUT, GET, POST, DELETE, OPTIONS\",\"access-control-allow-headers\":\"Content-Type\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"286\",\"etag\":\"W/\\\"11e-Bs2q3V5KOKgsw5gAsw6otzyC4Uw\\\"\",\"connection\":\"close\"}}"}],"serviceAPITimeout":20,"serviceNodeType":"custom","serviceType":"rest","type":"service"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Message0008"}},"message":[{"localeData":{"en":{"text":"Your%20leave%20is%20canceled.","type":"basic"}},"channel":"default"}],"name":"canceledMsg","preConditions":[],"refId":"8ff0bbf9-d099-5a22-9ea7-34b2c4d75e25","type":"message"},{"entityFields":{"cityAdvanced":[]},"entityType":"composite","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I did not recognize the value you have entered. Please enter again.","type":"basic"}},"channel":"default"}],"isArray":true,"localeData":{"en":{"label":"E_leaveDates","patterns":[],"compositePatterns":[{"value":"@date","original":"@date"},{"value":"from @fromDate to @toDate","original":"from @fromDate to @toDate"},{"value":"on @fromDate and @toDate","original":"on @fromDate and @toDate"},{"value":"from @fromDate  and return on @toDate","original":"from @fromDate  and return on @toDate"},{"value":"on @fromDate  and return on @toDate","original":"on @fromDate  and return on @toDate"}]}},"message":[{"localeData":{"en":{"text":"On%20what%20date%20do%20you%20want%20to%20cancel%3F","type":"basic"}},"channel":"default"}],"name":"E_leaveDates","preConditions":[],"refId":"8b7361bb-9d40-56fe-a09b-dd846f72daf8","type":"entity"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Script0004"}},"name":"flagForLeaveDate","preConditions":[],"refId":"a4efb9e1-434e-5eb6-8ee1-7e8f61559b3d","script":"context.isFromLeaveType%20%3D%20false%3B","type":"script"},{"endPoint":{"port":"","path":"{{env.URL_getLeave}}","method":"post","connectorEnabled":false,"piiDataEnabled":false},"entityFields":{"cityAdvanced":[]},"headers":{"type":"raw","value":"{\"Content-Type\":\"application/json\"}"},"idp":"none","localeData":{"en":{"label":"Service0003"}},"name":"fetchLeaveStatus","payload":{"type":"raw","value":"%7B%0D%0A%09%22employeeId%22%20%3A%20%22%7B%7Bcontext.empId%7D%7D%22%2C%0D%0A%09%22type%22%20%3A%20%22%7B%7Bcontext.entities.leaveType%7D%7D%22%2C%0D%0A%09%22date%22%20%3A%20%22%7B%7Bcontext.entities.E_leaveDates%5B0%5D.date%7D%7D%22%0D%0A%7D"},"preConditions":[],"refId":"7b10640e-fb1f-50a6-94a7-9230de993ce8","serviceAPITimeout":20,"serviceNodeType":"custom","serviceType":"rest","type":"service"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"Script0004"}},"name":"getUserProfile","preConditions":[],"refId":"a4f94561-8582-5b9d-ace8-655c8b22e511","script":"%2F%2F%20var%20email%20%3D%20userProfile(context.session)%3B%0A%2F%2F%20context.userProfile%3D%7B%22email%22%3A%22ujwal.tadur%40kore.com%22%7D%0Avar%20email%3D''%0Aif(context.entities.Email)%0A%20%20%20%20email%20%3D%20context.entities.Email%3B%0Aelse%20if(context.session.BotUserSession.lastMessage.messagePayload.from)%0A%20%20%20%20email%3Dcontext.session.BotUserSession.lastMessage.messagePayload.from%0Aelse%20if(context.session.UserContext.emailId)%0A%20%20%20%20email%3Dcontext.session.UserContext.emailId%0A%2F%2F%20else%0A%2F%2F%20%7B%0A%20%20%20%20%0A%2F%2F%20%7D%0A%2F%2F%20if(context.session.BotUserSession.channels%5B0%5D.reqId)%0Aif(email)%0A%7B%0A%20%20%20%20%2F%2F%20email%3Dcontext.session.BotUserSession.lastMessage.messagePayload.from%2F%2F%22ujwal.tadur%40kore.com%22%3B%2F%2Fcontext.session.BotUserSession.channels%5B0%5D.reqId.split(%22%2B%22)%5B1%5D%0A%20%20%20%20BotUserSession.put(%22userProfile%22%2Cemail)%3B%0A%7D%0Aelse%0A%7B%0A%20%20%20%20%2F%2F%20context.userProfile%3D%7B%22email%22%3A%22ujwal.tadur%40kore.com%22%7D%3B%0A%20%20%20%20BotUserSession.put(%22userProfile%22%2C%22ab%40koraqa1.com%22)%3B%0A%7D%0A%2F%2Femail%3Dcontext.userProfile.email%0A%2F%2F%20koreDebugger.log(%22email%20is%20%3A%22%2Bemail)%3B%0Avar%20data%3Dcontext.getEmployeeData.response.body%3B%0Acontext.managerId%3D%22%22%0Afor(i%3D0%3Bi%3Cdata.length%3Bi%2B%2B)%0A%7B%0A%20%20%20%20if(data%5Bi%5D.email%3D%3Demail)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context.managerId%3Ddata%5Bi%5D.employeeId%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%7D%0Acontext.employees%3D%5B%5D%0Aif(context.managerId!%3D%3D%22%22)%0A%7B%0Adata.forEach(i%3D%3E%7B%0A%20%20%20%20if(i.managerId%3D%3Dcontext.managerId)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context.employees.push(i.employeeId)%0A%20%20%20%20%7D%0A%7D)%0A%7D%0Acontext.testEmp%3Dcontext.employees%3B%0Acontext.LeavesData%3D%5B%5D%0Acontext.Wflag%3D0%0Aif(context.testEmp.length%3D%3D%3D0%20%26%26context.isWidget)%0A%7B%0A%20%20%20%20context.Wflag%3D1%0A%7D%0ABotUserSession.put(%22Wflag%22%2Ccontext.Wflag)%3B","type":"script"},{"entityFields":{"cityAdvanced":[]},"localeData":{"en":{"label":"noEmployeeData"}},"message":[{"localeData":{"en":{"text":"Sorry%2C%20we%20don't%20have%20your%20data%20on%20our%20records.%20Make%20sure%20you%20have%20completed%20your%20onboarding%20process.","type":"basic"}},"channel":"default"}],"name":"noEmployeeData","preConditions":[],"refId":"30760db4-a322-5363-9c1d-68ec837af5b6","type":"message"},{"entityFields":{"cityAdvanced":[]},"entityType":"date","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I am unable to recognize the date you entered. Please enter the date again, in the YYYY-MM-DD or MM-DD-YYYY form.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0003"}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0003","type":"basic"}},"channel":"default"}],"name":"date","preConditions":[],"refId":"c6aef26d-405e-5019-b55b-9c152952bcfc","type":"entity"},{"entityFields":{"cityAdvanced":[]},"entityType":"date","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I am unable to recognize the date you entered. Please enter the date again, in the YYYY-MM-DD or MM-DD-YYYY form.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0003"}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0003","type":"basic"}},"channel":"default"}],"name":"date","preConditions":[],"refId":"c6aef26d-405e-5019-b55b-9c152952bcfc","type":"entity"},{"entityFields":{"cityAdvanced":[]},"entityType":"date","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I am unable to recognize the date you entered. Please enter the date again, in the YYYY-MM-DD or MM-DD-YYYY form.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0003"}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0003","type":"basic"}},"channel":"default"}],"name":"date","preConditions":[],"refId":"c6aef26d-405e-5019-b55b-9c152952bcfc","type":"entity"},{"entityFields":{"cityAdvanced":[]},"entityType":"date","errorMessage":[{"localeData":{"en":{"text":"I'm sorry, I am unable to recognize the date you entered. Please enter the date again, in the YYYY-MM-DD or MM-DD-YYYY form.","type":"basic"}},"channel":"default"}],"localeData":{"en":{"label":"Entity0003"}},"message":[{"localeData":{"en":{"text":"Sample prompt message for Entity0003","type":"basic"}},"channel":"default"}],"name":"date","preConditions":[],"refId":"c6aef26d-405e-5019-b55b-9c152952bcfc","type":"entity"}]}